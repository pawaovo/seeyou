
---

# 📄 产品需求文档 (PRD): Gather GCD 聚会公约数

**版本：** 1.0

**状态：** 实施准备中

**目标：** 通过极简 Web 协作，实现聚会时间的高效对齐与艺术化呈现。

---

## 1. 愿景与核心目标 (Goals & Context)

### 1.1 产品愿景

打造一款“果式禅意 (Apple-Zen)”风格的工具。它不应该让用户觉得是在做“统计工作”，而是在参与一次**优雅的社交协同**。

### 1.2 核心目标

* **零进入门槛**：无需注册/登录，通过 URL + 4 位口令直接进入。
* **极致协同效率**：利用“最大公约数 (GCD)”算法，一秒看清最佳聚会时间。
* **艺术化产出**：将冷冰冰的数据转化为精美的邀请卡片。

---

## 2. 详细功能需求 (Functional Requirements)

### 2.1 门禁与访问 (Security)

* **[FR-1] 私密访问**：每个活动生成唯一的 UUID 链接。进入时强制要求 4 位数字口令。
* **[FR-2] 身份记忆**：利用浏览器 LocalStorage 实现免登录状态下的身份识别（创建者标记、参与者昵称回填）。

### 2.2 7x3 艺术看板 (The Painter)

* **[FR-3] 动态周矩阵**：
* **布局**：垂直排列的周卡片。横轴为日期（14 周六 格式），纵轴为 早/中/晚。
* **涂抹手势**：支持单点点击切换，以及在网格上滑动手势批量上色（Watercolor Effect）。


* **[FR-4] 无限延展**：底部设置 `+` 按钮。用户可下滑浏览并开启未来最多 31 天的候选范围。
* **[FR-5] 动态导航**：顶部 Tabs 仅显示“已有数据”的周序号，点击可平滑滚动至对应周。

### 2.3 全量数据决策 (Data Insights)

* **[FR-6] 全量排行榜**：实时汇总所有人的选择，按重合人数降序排列所有时段。
* *视觉*：背景色的透明度/深度与人数正相关。


* **[FR-7] 全量成员视图**：列出所有参与者及其选中的时间微缩图，点击名字可高亮显示该人的具体选择。

### 2.4 结果归档 (Closing)

* **[FR-8] 发起人控制**：识别创建者 LocalStorage，仅其可见“确认并锁定时间”按钮。
* **[FR-9] 海报生成**：一键将结果（主题、时间、名单）渲染为一张具备 9:16 比例、艺术感十足的长图。

---

## 3. UI/UX 设计目标 (Design Goals)

### 3.1 视觉风格说明

* **氛围**：平静、高级、留白充分。
* **质感**：Glassmorphism（毛玻璃效果），搭配 24px 超大圆角。
* **动效**：视图切换必须使用 `layout` 动画，操作反馈应具备物理回弹感。

### 3.2 关键页面流

1. **创建页**：输入标题 -> 划定首周日期 -> 生成链接。
2. **验证页**：软键盘输入 4 位数字密码。
3. **看板页**：顶部 Tab 导航 | 中部矩阵涂鸦 | 底部排行/名单切换。

---

## 4. 技术约束与逻辑 (Technical Logic)

### 4.1 核心算法 (GCD Logic)

* 系统必须遍历所有 `responses` 的 `availability` JSON 对象。
* 统计每一格（Slot）的 `count`。
* **排序权重**：`人数 (Desc)` > `日期 (Asc)` > `时段 (Asc)`。

### 4.2 数据过期机制

* 为了隐私和性能，活动将在 `start_date` 过去 45 天后自动从数据库物理删除。

---

## 5. 路线图与 Epic 拆解 (Roadmap)

| 阶段 | Epic 标题 | 核心价值 |
| --- | --- | --- |
| **P0** | **Epic 1: 门禁与环境** | 实现完整的免登录访问和安全校验闭环。 |
| **P0** | **Epic 2: 涂抹看板核心** | 实现 7x3 矩阵在移动端的丝滑涂抹体验。 |
| **P1** | **Epic 3: 全量透视引擎** | 让所有人能看到排行榜和人员名单，打破信息差。 |
| **P2** | **Epic 4: 艺术海报导出** | 完成聚会的最后一步——生成精美通知海报。 |

---

## 6. 验收标准 (Definition of Done)

1. 用户从看到链接到完成“时间涂抹”不超过 30 秒。
2. 在手机端连续滑动涂抹无掉帧卡顿。
3. 排行榜能准确反映所有参与者的最新选择。
4. 视觉效果通过“Apple-Zen”风格一致性检查。

---
